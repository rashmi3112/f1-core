import{a as q,b as z,c as b}from"./chunk-JIXGBCLF.js";import{a as I}from"./chunk-SSSNYC3D.js";import{a as L,d as $}from"./chunk-WESS5K4W.js";import{b as V}from"./chunk-FLHN6HCS.js";import{a as G}from"./chunk-OZYUONIT.js";import{h as P,j as F,k as N,la as j,na as U}from"./chunk-MNVCMMLB.js";import{Ab as x,Bb as f,Cb as e,Db as t,Eb as k,Ib as M,Kc as S,Lb as T,Lc as g,Nb as O,Qb as C,Rb as A,Xb as r,Yb as a,Zb as s,_a as w,bb as n,dc as v,hc as m,ia as p,ic as l,jc as y,ma as u,qb as B,va as _,wa as D,xb as R}from"./chunk-IQZCI5PO.js";var Q=(o,d)=>d.productId;function W(o,d){if(o&1&&(e(0,"tr")(1,"td",21)(2,"div",22),k(3,"img",23),e(4,"span"),r(5),t()()(),e(6,"td",24),r(7),t(),e(8,"td",25),r(9),m(10,"currency"),t()()),o&2){let i=d.$implicit;n(3),C("src",i.imageUrl,w),C("alt",i.productName),n(2),a(i.productName),n(2),s("x",i.quantity,""),n(2),a(l(10,5,i.price))}}function X(o,d){if(o&1){let i=M();e(0,"mat-card",0)(1,"div",1)(2,"div",2)(3,"h2",3),r(4),t(),e(5,"button",4),T("click",function(){_(i);let H=O();return D(H.onReturnClick())}),r(6),t()(),e(7,"div",5)(8,"div",6)(9,"h4",7),r(10,"Billing and delivery details"),t(),e(11,"dl")(12,"dt",8),r(13,"Shipping address"),t(),e(14,"dt",9),r(15),m(16,"address"),t()(),e(17,"dl")(18,"dt",8),r(19,"Payment info"),t(),e(20,"dt",9),r(21),m(22,"paymentCard"),t()()(),e(23,"div",6)(24,"h4",7),r(25,"Order details"),t(),e(26,"dl")(27,"dt",8),r(28,"Email address"),t(),e(29,"dt",9),r(30),t()(),e(31,"dl")(32,"dt",8),r(33,"Order Status"),t(),e(34,"dt",9),r(35),t()(),e(36,"dl")(37,"dt",8),r(38,"Order date"),t(),e(39,"dt",9),r(40),m(41,"date"),t()()(),e(42,"div",10)(43,"div",11)(44,"table",12)(45,"tbody",12),x(46,W,11,7,"tr",null,Q),t()()()(),e(48,"div",13)(49,"p",14),r(50,"Order summary"),t(),e(51,"div",15)(52,"div",6)(53,"dl",16)(54,"dt",17),r(55,"Subtotal"),t(),e(56,"dd",18),r(57),m(58,"currency"),t()(),e(59,"dl",16)(60,"dt",17),r(61,"Discount"),t(),e(62,"dd",19),r(63),m(64,"currency"),t()(),e(65,"dl",16)(66,"dt",17),r(67,"Delivery fee"),t(),e(68,"dd",18),r(69),m(70,"currency"),t()()(),e(71,"dl",20)(72,"dt",17),r(73,"Total"),t(),e(74,"dd",18),r(75),m(76,"currency"),t()()()()()()()}if(o&2){let i=O();n(4),s("Order summary for #",i.order.id,""),n(2),a(i.buttonText),n(9),a(l(16,11,i.order.shippingAddress)),n(6),a(l(22,13,i.order.paymentSummary)),n(9),a(i.order.buyerEmail),n(5),a(i.order.status),n(5),a(y(41,15,i.order.orderDate,"medium")),n(6),f(i.order.orderItems),n(11),a(l(58,18,i.order.subtotal)),n(6),a(l(64,20,i.order.discount)),n(6),a(l(70,22,i.order.shippingPrice)),n(6),a(l(76,24,i.order.total))}}var h=class o{orderService=p(b);activatedRoute=p(P);accountService=p(V);adminService=p(G);router=p(F);order;buttonText=this.accountService.isAdmin()?"Return to Admin":"Return to orders";ngOnInit(){this.loadOrder()}onReturnClick(){this.accountService.isAdmin()?this.router.navigateByUrl("/admin"):this.router.navigateByUrl("/orders")}loadOrder(){let d=this.activatedRoute.snapshot.paramMap.get("id");if(!d)return;(this.accountService.isAdmin()?this.adminService.getOrder(+d):this.orderService.getOrderDetailed(+d)).subscribe({next:c=>this.order=c})}static \u0275fac=function(i){return new(i||o)};static \u0275cmp=u({type:o,selectors:[["app-order-detailed"]],standalone:!0,features:[v],decls:1,vars:1,consts:[[1,"bg-white","py-8","shadow-md","max-w-screen-lg","mx-auto"],[1,"w-full","px-4"],[1,"flex","justify-between"],[1,"text-2xl","text-center","font-semibold"],["mat-stroked-button","",3,"click"],[1,"mt-8","py-3","border-t","border-gray-200","flex","gap-16"],[1,"space-y-2"],[1,"text-lg","font-semibold"],[1,"font-medium"],[1,"mt-1","font-light"],[1,"mt-4"],[1,"border-y","border-gray-200"],[1,"divide-y","divide-gray-200"],[1,"space-y-4","rounded-lg","border-y","border-gray-200","p-4","bg-white"],[1,"text-xl","font-semibold"],[1,"space-y-4"],[1,"flex","items-center","justify-between","gap-4"],[1,"font-medium","text-gray-500"],[1,"font-medium","text-gray-900"],[1,"font-medium","text-green-500"],[1,"flex","items-center","justify-between","gap-4","border-t","border-gray-200","pt-2"],[1,"py-4"],[1,"flex","items-center","gap-4"],[1,"w-10","h-10",3,"src","alt"],[1,"p-4"],[1,"p-4","text-right"]],template:function(i,c){i&1&&B(0,X,77,26,"mat-card",0),i&2&&R(c.order?0:-1)},dependencies:[$,L,U,j,S,g,q,z]})};var Y=(o,d)=>d.id;function Z(o,d){if(o&1&&(e(0,"tr",9)(1,"th",10),r(2),t(),e(3,"td"),r(4),m(5,"date"),t(),e(6,"td"),r(7),m(8,"currency"),t(),e(9,"td"),r(10),t()()),o&2){let i=d.$implicit;A("routerLink","/orders/",i.id,""),n(2),s("# ",i.id,""),n(2),a(y(5,6,i.orderDate,"medium")),n(3),a(l(8,9,i.total)),n(3),a(i.status)}}var E=class o{orderService=p(b);orders=[];ngOnInit(){this.orderService.getOrdersForUser().subscribe({next:d=>this.orders=d})}static \u0275fac=function(i){return new(i||o)};static \u0275cmp=u({type:o,selectors:[["app-order"]],standalone:!0,features:[v],decls:18,vars:0,consts:[[1,"mx-auto","mt-32"],[1,"font-semibold","text-2xl","mb-6","text-center"],[1,"w-full"],[1,"min-w-full","divide-y","divide-gray-200","cursor-pointer"],[1,"bg-gray-50"],[1,"uppercase","text-gray-600","text-sm"],[1,"text-center","px-6","py-3"],[1,"text-left"],[1,"bg-white","divide-y","divide-gray-200"],[1,"hover:bg-gray-100",3,"routerLink"],[1,"px-6","py-3"]],template:function(i,c){i&1&&(e(0,"div",0)(1,"h2",1),r(2,"My Orders"),t(),e(3,"div",2)(4,"table",3)(5,"thead",4)(6,"tr",5)(7,"th",6),r(8,"Orders"),t(),e(9,"th",7),r(10,"Date"),t(),e(11,"th",7),r(12,"Total"),t(),e(13,"th",7),r(14,"Status"),t()()(),e(15,"tbody",8),x(16,Z,11,11,"tr",9,Y),t()()()()),i&2&&(n(16),f(c.orders))},dependencies:[N,S,g]})};var _e=[{path:"",component:E,canActivate:[I]},{path:":id",component:h,canActivate:[I]}];export{_e as orderRoutes};
